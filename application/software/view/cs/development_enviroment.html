{include file="template/header" title="C# 开发环境" /}
<div class="list list-number">
	<div class="title">自定义开发环境</div>
	<div class="content closed">
		<div class="list list-number">
			<div class="title">字型&色彩</div>
			<div class="content open">
				<p>
					工具 -> 选项 -> 环境 -> 字型和色彩 ... <br>
					字体: YaHei Consolas Hybird <br>
					字串 / String: 改为红色 <br>

				</p>
			</div>

			<div class="title">花括号换行</div>
			<div class="content open">
				<p>工具 -> 选项 -> 文字编辑器 -> C# -> 新行 ...</p>
			</div>
		</div>
	</div>

	<div class="title">开发环境小技巧</div>
	<div class="content open">
		tbd...
	</div>

	<div class="title">调试</div>
	<div class="content open">
		<div class="list list-number">
			<div class="title">输出调试信息</div>
			<div class="content closed">
				<p>
					Debug: 可以输出调试信息到"输出"窗口, 仅限于Debug模式. <br>
					Trace: 可以输出调试信息到"输出"窗口, Debug和Release模式都可以.
				</p>
			</div>

			<div class="title">断言</div>
			<div class="content closed">
				<p>
					Debug.Assert(condition, message, detailMessage); <br>
					断言assert是仅在Debug版本起作用的宏, 它用于检查“不应该”发生的情况. 如果是Release版本, 编译器忽略所有的断言（看成空语句）.
				</p>
			</div>

			<div class="title">Release模式</div>
			<div class="content closed">
				<p>在把编译配置从Debug改为Release后, 就不能调试程序了, 即使在代码中设置了断点,  代码也不会暂停.</p>
			</div>

			<div class="title">卸载&加载项目</div>
			<div class="content closed">
				<p>一个方案中含有多个项目, 但是其中某个项目有问题, 导致其他项目不能运行, 可以暂时先把有问题的项目卸载掉, 等有时间了再加载进来修改.</p>
			</div>
		</div>
	</div>

	<div class="title">编译</div>
	<div class="content open">
		<div class="list list-number">
			<div class="title">自动生成版本号</div>
			<div class="content closed">
				<p>
					只需把 AssemblyInfo.cs文件中的 <br>
					[assembly:AssemblyVersion("1.0.0.0")]改成 <br>
					[assembly:AssemblyVersion("1.0.*")]，另外还需要把 <br>
					[assembly:AssemblyFileVersion("1.0.0.0")]注释屏蔽掉。这样再生成的程序集就是自动版本号了。 <br>
					按照这个格式出来的版本号，内部修订版本号（第三个字段）的位置出现的是2000年1月1日到编译日期的天数，内部修订号（第四个字段）是当天从0点到当前时间的刻度数。
				</p>
			</div>

			<!--条件编译-->
			<div class="title">条件编译</div>
			<div class="content closed">
				<p>条件编译可以根据定义不同符号, 编译出不同版本的程式!</p>

				<p class="text-strong">定义符号</p>
				<div class="container-fluid pl-0">
					<div class="row">
						<div class="col-1">1) 源文件: </div>
						<div class="col-2">#define DEBUG & #undef DEBUG</div>
					</div>
					<div class="row">
						<div class="col-1">2) 编译时: </div>
						<div class="col-2">编译时使用define参数: /define:name[;name2] </div>
					</div>
					<div class="row">
						<div class="col-1">3) 指定项目属性: </div>
						<div class="col-4">Project Property--->Build--->Conditional compilation symbols, 如果定义多个可使用逗号隔开</div>
					</div>
				</div>

				<p class="text-strong">使用范围</p>
				<p>用 #define 创建的符号的使用范围是当前文件.</p>
			</div>

			<div class="title">x86 vs x64</div>
			<div class="content closed">
				<p>
					any: 程序在第一次运行的时候会根据环境预编译成对应系统最适合的. <br>
					x86: 只能在x86和64上运行, 但是在64上运行的优化肯定没选any或64好. <br>
					x64: 只能在x64上面运行.
				</p>
				<p class="text-danger">注: 如果加载了32位DLL,而且要在64位OS上运行, 则必须编译成x86, 否则会出错!</p>
			</div>

			<!--Build Event-->
			<div class="title">Build Event</div>
			<div class="content closed">
				<a href="https://blog.csdn.net/norsd/article/details/10575217">网络资料</a>	
			</div>

			<!--#warning & #error-->
			<div class="title">编译警告&错误: #warning, #error & #pgagma</div>
			<div class="content closed">
				<p class="text-strong">自定义编译警告&错误</p>
				<pre class="prettyprint linenums">
<code>// 如果编译器遇到#warning指令, 会给用户显示#warning指令后面的文本, 之后编译继续进行.
#if DEBUG && RELEASE
    #error "You've defined DEBUG and RELEASE simulataneously!"
#endif

// 如果编译器遇到#error指令, 就会给用户显示后面的文本, 作为一个编译错误信息, 然后会立即退出编译, 不会生成IL代码.
#warning "Don't forget to remove this line the boss tests the code!"
    Console.WriteLine("*I have this job*");
</code>
				</pre>

				<p class="text-strong">抑制&恢复某个编译警告</p>
				<pre class="prettyprint linenums">
<code>
#pragma warning disable 169
    public class MyClass
    {
        int neverUsedField;
    }
#pragma warning restore 169
</code>
				</pre>

				<p>以上只能抑制(恢复)某个文件中的某个警告, 也可以在项目属性中设置(项目属性 -> 建置 -> 错误和警告 -> 隐藏警告...), 在某个项目中抑制某个警告!</p>
			</div>
		</div>	
	</div>

	<!--#if DEBUG va Debugger.IsAttached-->
	<div class="title">#if DEBUG vs Debugger.IsAttached</div>
	<div class="content closed">
		<div class="container-fluid">
			<div class="row">
				<div class="col-1">#if DEBUG</div>
				<div class="col-2">DEBUG代码不会编译到程序集中</div>
			</div>
			<div class="row">
				<div class="col-1">Debugger.IsAttached</div>
				<div class="col-10">
					Gets a value that indicates whether a debugger is attached to the process.<br>
					在开发环境中允许代码, 不管是Debug模式, 还是Release模式, 都会返回true. 运行执行挡时, 如果Debugger Attached, 也会返回true.(执行挡怎么Attach Debugger?)
				</div>
			</div>
		</div>
	</div>

	<!--NuGet-->
    <div class="title">NuGet</div>
    <div class="content closed">
        <p>
            <strong>什么是NuGet?</strong><br>
            通俗来说, NuGet是用来管理引用的!
        </p>
        <p>
            <strong>安装Dapper失败, 怎么办?</strong><br>
            离线安装旧版可以解决!<br>            
            例如: install-package dapper -version 1.50.2 -source C:\Users\Jack_Ku\AppData\Local\NuGet\Cache\
        </p>
    </div>



	<div class="title">常用工具&插件</div>
	<div class="content open">
		tbd...
	</div>

	<div class="title">常见错误</div>
	<div class="content closed">
		<div class="list list-number">
			<div class="title">编译出错</div>
			<div class="content closed">
				<div class="list list-number">
					<div class="title">錯誤: 名稱 'Jack4net' 不存在於目前內容中</div>
					<div class="content closed">
						<p>
							命名引用了参考, 却找不到相应的命名空间和类! <br>
							确认一下项目是否使用了错误的Framework, 比如使用了.NET Framework 4 Client Profile?
						</p>
					</div>
				</div>
			</div>

			<div class="title">运行错误</div>
			<div class="content closed">
				<div class="list list-number">
					<div class="title">使用Ado.Net时报错: Incorrect syntax near the keyword 'File'</div>
					<div class="content closed">
						<p>
							File是SQL Server关键字, 不能作为表名, 字段名, 需要添加中括号括起来. <br>
							怪不得SQL Sever自动生成的SQL语句会自动添加中括号!
						</p>
					</div>
					<div class="title">运行Jack4net.Log.LogService报错: The type initializer for 'Jack4net.Log.LogService' threw an exception.</div>
					<div class="content closed">
						<p>
							项目中引用了Jack4net.dll和log4net.dll, 把log4net.dll的引用去掉就可以了.
						</p>
					</div>
				</div>
			</div>	
		</div>
	</div>
</div>
{include file="template/footer" /}